repos:
  - repo: local
    hooks:
      - id: ruff
        name: ruff
        entry: uv run ruff check ccbt/ --fix --exit-non-zero-on-fix
        language: system
        types: [python]
        files: ^ccbt/.*\.py$
        exclude: ^(tests/|benchmarks/|.*/__pycache__/)
        pass_filenames: false
      - id: ruff-format
        name: ruff-format
        entry: uv run ruff format ccbt/
        language: system
        types: [python]
        files: ^ccbt/.*\.py$
        exclude: ^(tests/|benchmarks/|.*/__pycache__/)
        pass_filenames: false
      - id: ty
        name: ty
        entry: uv run ty check --config-file=ty.toml --output-format=concise
        language: system
        pass_filenames: false
      - id: bandit
        name: bandit
        entry: uv run bandit -r ccbt/ -f json -o bandit-report.json --severity-level medium --exclude tests/
        language: system
        pass_filenames: false
      - id: pytest
        name: pytest
        entry: uv run pytest tests/ -v --tb=short --maxfail=5 --timeout=60
        language: system
        types: [python]
        files: ^ccbt/.*\.py$
        exclude: ^(tests/|benchmarks/|.*/__pycache__/)
        pass_filenames: false
      - id: mkdocs-build
        name: mkdocs-build
        entry: uv run mkdocs build --strict
        language: system
        types: [markdown]
        files: ^(docs/.*\.md|README\.md|mkdocs\.yml)$
        pass_filenames: false