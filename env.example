# ccBitTorrent Environment Variables Configuration
# Copy this file to .env and modify values as needed
# All variables are prefixed with CCBT_ to avoid conflicts

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Connection limits
CCBT_MAX_PEERS=200                    # Maximum global peers (1-10000)
CCBT_MAX_PEERS_PER_TORRENT=50        # Maximum peers per torrent (1-1000)
CCBT_MAX_CONNECTIONS_PER_PEER=1       # Max parallel connections per peer (1-8)

# Request pipeline settings
CCBT_PIPELINE_DEPTH=16                # Request pipeline depth (1-128)
CCBT_BLOCK_SIZE_KIB=16                # Block size in KiB (1-64)
CCBT_MIN_BLOCK_SIZE_KIB=4             # Minimum block size in KiB (1-64)
CCBT_MAX_BLOCK_SIZE_KIB=64            # Maximum block size in KiB (1-1024)

# Socket tuning
CCBT_SOCKET_RCVBUF_KIB=256            # Socket receive buffer size in KiB (1-65536)
CCBT_SOCKET_SNDBUF_KIB=256            # Socket send buffer size in KiB (1-65536)
CCBT_TCP_NODELAY=true                 # Enable TCP_NODELAY (true/false)

# Timeouts (seconds)
CCBT_CONNECTION_TIMEOUT=30.0          # Connection timeout (1.0-300.0)
CCBT_HANDSHAKE_TIMEOUT=10.0           # Handshake timeout (1.0-60.0)
CCBT_KEEP_ALIVE_INTERVAL=120.0        # Keep alive interval (30.0-600.0)
CCBT_PEER_TIMEOUT=60.0                # Peer inactivity timeout (5.0-600.0)
CCBT_DHT_TIMEOUT=2.0                  # DHT request timeout (1.0-60.0)

# Listen settings
CCBT_LISTEN_PORT=6881                 # Listen port (1024-65535)
CCBT_LISTEN_INTERFACE=0.0.0.0         # Listen interface
CCBT_ENABLE_IPV6=true                 # Enable IPv6 support (true/false)

# Transport protocols
CCBT_ENABLE_TCP=true                  # Enable TCP transport (true/false)
CCBT_ENABLE_UTP=false                 # Enable uTP transport (true/false)
CCBT_ENABLE_ENCRYPTION=false          # Enable protocol encryption (true/false)

# Choking strategy
CCBT_MAX_UPLOAD_SLOTS=4               # Maximum upload slots (1-20)
CCBT_OPTIMISTIC_UNCHOKE_INTERVAL=30.0 # Optimistic unchoke interval (1.0-600.0)
CCBT_UNCHOKE_INTERVAL=10.0            # Unchoke interval (1.0-600.0)

# Rate limiting (KiB/s, 0 = unlimited)
CCBT_GLOBAL_DOWN_KIB=0                # Global download limit (0+)
CCBT_GLOBAL_UP_KIB=0                  # Global upload limit (0+)
CCBT_PER_PEER_DOWN_KIB=0              # Per-peer download limit (0+)
CCBT_PER_PEER_UP_KIB=0                # Per-peer upload limit (0+)

# Tracker settings
CCBT_TRACKER_TIMEOUT=30.0             # Tracker request timeout (5.0-120.0)
CCBT_TRACKER_CONNECT_TIMEOUT=10.0     # Tracker connection timeout (1.0-60.0)
CCBT_TRACKER_CONNECTION_LIMIT=50      # Maximum tracker connections (1-200)
CCBT_TRACKER_CONNECTIONS_PER_HOST=10  # Max connections per tracker host (1-50)
CCBT_DNS_CACHE_TTL=300                # DNS cache TTL in seconds (60-3600)

# =============================================================================
# DISK CONFIGURATION
# =============================================================================

# Preallocation strategy: none, sparse, full, fallocate
CCBT_PREALLOCATE=full                 # Preallocation strategy
CCBT_SPARSE_FILES=false               # Use sparse files if supported (true/false)

# Write optimization
CCBT_WRITE_BATCH_KIB=64               # Write batch size in KiB (1-1024)
CCBT_WRITE_BUFFER_KIB=1024            # Write buffer size in KiB (0-65536)
CCBT_USE_MMAP=true                    # Use memory mapping (true/false)
CCBT_MMAP_CACHE_MB=128                # Memory-mapped cache size in MB (16-2048)
CCBT_MMAP_CACHE_CLEANUP_INTERVAL=30.0 # MMap cache cleanup interval (1.0-300.0)

# Hash verification
CCBT_HASH_WORKERS=4                   # Number of hash verification workers (1-32)
CCBT_HASH_CHUNK_SIZE=65536            # Chunk size for hash verification (1024-1048576)
CCBT_HASH_BATCH_SIZE=4                # Number of pieces to verify in parallel batches (1-64)
CCBT_HASH_QUEUE_SIZE=100              # Hash verification queue size (10-500)

# I/O threading
CCBT_DISK_WORKERS=2                   # Number of disk I/O workers (1-16)
CCBT_DISK_QUEUE_SIZE=200              # Disk I/O queue size (10-1000)
CCBT_CACHE_SIZE_MB=256                # Cache size in MB (16-4096)

# Advanced settings
CCBT_DIRECT_IO=false                  # Use direct I/O (true/false)
CCBT_SYNC_WRITES=false                # Synchronize writes (true/false)
CCBT_READ_AHEAD_KIB=64                # Read ahead size in KiB (0-1024)
CCBT_ENABLE_IO_URING=false            # Enable io_uring on Linux if available (true/false)
CCBT_DOWNLOAD_PATH=                   # Default download path

# Checkpoint settings
CCBT_CHECKPOINT_ENABLED=true          # Enable download checkpointing (true/false)
CCBT_CHECKPOINT_FORMAT=both           # Checkpoint file format (json/binary/both)
CCBT_CHECKPOINT_DIR=                  # Checkpoint directory (defaults to download_dir/.ccbt/checkpoints)
CCBT_CHECKPOINT_INTERVAL=30.0         # Checkpoint save interval in seconds (1.0-3600.0)
CCBT_CHECKPOINT_ON_PIECE=true         # Save checkpoint after each verified piece (true/false)
CCBT_AUTO_RESUME=true                 # Automatically resume from checkpoint on startup (true/false)
CCBT_CHECKPOINT_COMPRESSION=true      # Compress binary checkpoint files (true/false)
CCBT_AUTO_DELETE_CHECKPOINT_ON_COMPLETE=true # Auto-delete checkpoint when download completes (true/false)
CCBT_CHECKPOINT_RETENTION_DAYS=30     # Days to retain checkpoints before cleanup (1-365)

# =============================================================================
# STRATEGY CONFIGURATION
# =============================================================================

# Piece selection strategy: round_robin, rarest_first, sequential
CCBT_PIECE_SELECTION=rarest_first     # Piece selection strategy
CCBT_ENDGAME_DUPLICATES=2             # Endgame duplicate requests (1-10)
CCBT_ENDGAME_THRESHOLD=0.95           # Endgame mode threshold (0.1-1.0)
CCBT_STREAMING_MODE=false              # Enable streaming mode (true/false)

# Advanced strategy settings
CCBT_RAREST_FIRST_THRESHOLD=0.1       # Rarest first threshold (0.0-1.0)
CCBT_SEQUENTIAL_WINDOW=10             # Sequential window size (1-100)
CCBT_PIPELINE_CAPACITY=4              # Request pipeline capacity (1-32)

# Piece priorities
CCBT_FIRST_PIECE_PRIORITY=true        # Prioritize first piece (true/false)
CCBT_LAST_PIECE_PRIORITY=false        # Prioritize last piece (true/false)

# =============================================================================
# DISCOVERY CONFIGURATION
# =============================================================================

# DHT settings
CCBT_ENABLE_DHT=true                  # Enable DHT (true/false)
CCBT_DHT_PORT=6882                    # DHT port (1024-65535)
# DHT bootstrap nodes (comma-separated)
CCBT_DHT_BOOTSTRAP_NODES=router.bittorrent.com:6881,dht.transmissionbt.com:6881,router.utorrent.com:6881,dht.libtorrent.org:25401

# PEX settings
CCBT_ENABLE_PEX=true                  # Enable Peer Exchange (true/false)
CCBT_PEX_INTERVAL=30.0                # Peer Exchange announce interval in seconds (5.0-3600.0)

# Tracker settings
CCBT_ENABLE_HTTP_TRACKERS=true        # Enable HTTP trackers (true/false)
CCBT_ENABLE_UDP_TRACKERS=true         # Enable UDP trackers (true/false)
CCBT_TRACKER_ANNOUNCE_INTERVAL=1800.0 # Tracker announce interval in seconds (60.0-86400.0)
CCBT_TRACKER_SCRAPE_INTERVAL=3600.0   # Tracker scrape interval in seconds (60.0-86400.0)

# =============================================================================
# OBSERVABILITY CONFIGURATION
# =============================================================================

# Logging
CCBT_LOG_LEVEL=INFO                   # Log level (DEBUG/INFO/WARNING/ERROR/CRITICAL)
CCBT_LOG_FILE=                        # Log file path (empty = stdout)
CCBT_LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s # Log format string
CCBT_STRUCTURED_LOGGING=true          # Use structured logging (true/false)
CCBT_LOG_CORRELATION_ID=true          # Include correlation IDs (true/false)

# Metrics
CCBT_ENABLE_METRICS=true             # Enable metrics collection (true/false)
CCBT_METRICS_PORT=9090               # Metrics port (1024-65535)
CCBT_METRICS_INTERVAL=5.0            # Metrics collection interval in seconds (0.5-3600.0)

# Tracing
CCBT_ENABLE_PEER_TRACING=false       # Enable peer tracing (true/false)
CCBT_TRACE_FILE=                     # Path to write traces (empty = disabled)
CCBT_ALERTS_RULES_PATH=.ccbt/alerts.json # Path to alert rules JSON file

# =============================================================================
# LIMITS CONFIGURATION
# =============================================================================

# Global rate limits (KiB/s, 0 = unlimited)
CCBT_LIMITS_GLOBAL_DOWN_KIB=0        # Global download limit (0+)
CCBT_LIMITS_GLOBAL_UP_KIB=0          # Global upload limit (0+)

# Per-torrent rate limits (KiB/s, 0 = unlimited)
CCBT_LIMITS_PER_TORRENT_DOWN_KIB=0   # Per-torrent download limit (0+)
CCBT_LIMITS_PER_TORRENT_UP_KIB=0     # Per-torrent upload limit (0+)

# Per-peer rate limits (KiB/s, 0 = unlimited)
CCBT_LIMITS_PER_PEER_UP_KIB=0        # Per-peer upload limit (0+)

# Scheduler settings
CCBT_SCHEDULER_SLICE_MS=100          # Scheduler time slice in ms (1-1000)

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

CCBT_SECURITY_ENABLE_ENCRYPTION=false # Enable protocol encryption (true/false)
CCBT_SECURITY_VALIDATE_PEERS=true     # Validate peers before exchanging data (true/false)
CCBT_SECURITY_RATE_LIMIT_ENABLED=true # Enable security rate limiter (true/false)
CCBT_SECURITY_MAX_CONNECTIONS_PER_PEER=1 # Maximum parallel connections per peer (1-8)

# =============================================================================
# MACHINE LEARNING CONFIGURATION
# =============================================================================

CCBT_ML_PEER_SELECTION_ENABLED=false # Enable ML-based peer selection (true/false)
CCBT_ML_PIECE_PREDICTION_ENABLED=false # Enable ML piece prediction (true/false)

# =============================================================================
# CLI-SPECIFIC OVERRIDES
# =============================================================================
# These can be used to override any configuration value via environment variables
# Format: CCBT_<SECTION>_<OPTION>=<value>
# Example: CCBT_NETWORK_LISTEN_PORT=8080

# =============================================================================
# DEVELOPMENT AND DEBUGGING
# =============================================================================

# Debug mode
CCBT_DEBUG=false                      # Enable debug mode (true/false)
CCBT_VERBOSE=false                    # Enable verbose output (true/false)

# Performance profiling
CCBT_ENABLE_PROFILING=false           # Enable performance profiling (true/false)
CCBT_PROFILE_OUTPUT=                  # Profile output file path

# Testing
CCBT_TEST_MODE=false                  # Enable test mode (true/false)
CCBT_MOCK_NETWORK=false              # Use mock network for testing (true/false)

# =============================================================================
# NOTES
# =============================================================================
# 1. All boolean values can be set as: true/false, 1/0, yes/no, on/off
# 2. Numeric values must be within the specified ranges
# 3. Enum values must match exactly (case-sensitive)
# 4. Empty values will use defaults
# 5. Environment variables take precedence over config file values
# 6. CLI arguments take precedence over environment variables
# 7. Use quotes for values containing spaces or special characters
