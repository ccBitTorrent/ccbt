---
globs: ccbt/cli/*.py,ccbt/__main__.py
description: CLI and interface implementation patterns
---

# CLI & Interface Implementation

## CLI Architecture
Located in [ccbt/cli/](mdc:ccbt/cli/) directory:

### Main CLI
- **Entry Point**: [ccbt/__main__.py](mdc:ccbt/__main__.py) - Main CLI entry point
- **Rich Interface**: Beautiful CLI with Rich library integration
- **Command System**: Comprehensive command system with Click
- **Configuration**: CLI-based configuration management

### Interactive CLI
- **Real-time Display**: Live statistics and progress updates
- **Interactive Commands**: Command-based interface with help system
- **Progress Tracking**: Real-time download progress monitoring
- **Peer Monitoring**: Live peer connection monitoring

### Progress Management
- **Multiple Progress Types**: Download, upload, piece, speed, peer progress
- **Real-time Updates**: Live progress updates with ETA calculation
- **Speed Monitoring**: Download/upload speed tracking
- **Completion Tracking**: Piece and file completion tracking

## CLI Commands

### Basic Commands
```bash
# Download torrent file
ccbt download example.torrent

# Download from magnet link
ccbt magnet "magnet:?xt=urn:btih:..."

# Start interactive mode
ccbt interactive

# Start web interface
ccbt web --port 9090
```

### Advanced Commands
```bash
# Debug mode
ccbt debug

# Show status
ccbt status

# Configuration management
ccbt config --create
ccbt config --edit
```

## Implementation Patterns

### CLI Command Structure
```python
import click
from rich.console import Console

@click.command()
@click.argument('torrent_file', type=click.Path(exists=True))
@click.option('--interactive', '-i', is_flag=True, help='Start interactive mode')
def download(torrent_file, interactive):
    console = Console()
    # Implementation
```

### Interactive Interface
```python
from ccbt.cli import InteractiveCLI

interactive_cli = InteractiveCLI(session, console)
await interactive_cli.run()
```

### Progress Bars
```python
from ccbt.cli import ProgressManager

progress_manager = ProgressManager(console)
with progress_manager.create_progress() as progress:
    task = progress.add_task("Downloading", total=100)
    # Update progress
    progress.update(task, completed=50)
```

## Rich Interface Features
- **Progress Bars**: Live progress tracking with ETA
- **Tables**: Structured data display
- **Panels**: Information panels with borders
- **Live Updates**: Real-time display updates
- **Color Coding**: Status-based color coding
- **Interactive Elements**: User input and confirmation prompts

## Configuration Integration
- **Environment Variables**: CCBT_ prefixed environment variables
- **Configuration Files**: TOML-based configuration
- **Hot Reload**: Configuration changes without restart
- **Validation**: Pydantic-based configuration validation